<body>
<!-- <button class="btn btn-outline-dark rounded-pill py-2  " (click)="addNewLesson()" id="btn" >Add New Lesson </button>

<button class="btn btn-outline-dark2 rounded-pill py-2" (click)="addNew()" id="btn" >Show All Lessones </button> -->
<div class="container-fluid">

    <div style="text-align: center;">
        <button class="btn btn-outline-dark" (click)="addNewLesson()" id="btn" >Add New Lesson </button>
        <button class="btn btn-outline-dark" (click)="addNew()" id="btn" >Show All Lessones  </button>
    </div>
<hr>

<div *ngIf="isOpen then add else table "></div>

<ng-template #add>
  <div class="formAdd">
    <div class="home">
        <h1 class="titel">Lesson</h1>
        <h4 class="description">{{addORupdate}}</h4><br><br>
        <form  >
            <div>
                <mat-label>Name:</mat-label>
                <br>
                <input matInput type="text" [(ngModel)]="Lesson.title" id="title" #title name="title" [value]="Lesson.title" >
            </div>
            <mat-error *ngIf="title.oninvalid  && title.ontouchend">
                <div class="alert alert-danger" >
                Name Must Be required and Max Length 10 Letter</div>
            </mat-error>
            <br>
    
            <div>
                <mat-label>Description:</mat-label><br>
                <input matInput type="text" id="details" name="details" [(ngModel)]="Lesson.details" #details [value]="Lesson.details">
            </div>
            <mat-error *ngIf=" details.oninvalid  &&  details.ontouchend">
                <div class="alert alert-danger" >
                    Description Must Be required and Max Length 15 Letter</div>
            </mat-error>
            <br>
    
            <div>
                <mat-label>Type: </mat-label><br>
                <input matInput type="text" id="type" name="type" #type [(ngModel)]="Lesson.type" [value]="Lesson.type">
            </div>
            <mat-error *ngIf="type.oninvalid  && type.ontouchend">
                <div class="alert alert-danger" >
                    type Must Be required and Number</div>
            </mat-error><br>
    
            <div>
                <mat-label>Lessone Number: </mat-label><br>
                <input  matInput type="text" id="contentNumber"  name="contentNumber" #contentNumber [(ngModel)]="Lesson.contentNumber" [value]="Lesson.contentNumber" >
            </div>
            <mat-error *ngIf="contentNumber.oninvalid  && contentNumber.ontouchend">
                <div class="alert alert-danger" >
                    LessoneNumber Must Be required and Number</div>
            </mat-error>
            <br>
    
            <div>
                <mat-label>Duration: </mat-label><br>
                <input matInput type="text" id="duration" name="duration"  #duration [(ngModel)]="Lesson.duration" [value]="Lesson.duration">
            </div>
            <mat-error *ngIf="duration.oninvalid  && duration.ontouchend">
                <div class="alert alert-danger" >
                    Duration Must Be required and Number</div>
            </mat-error>
            
            <br>
    
            <div>
                <mat-label>Lecture: </mat-label><br>
                <select  #lectureId id="lectureId" name="lectureId" [(ngModel)]="Lesson.lectureId" [value]="Lesson.lectureId" >
                        <option *ngFor="let lecture of allLecture" value="{{lecture.id}}">{{lecture.tilte}}</option>
                </select>
            </div><br>

            <div>
                <mat-label>Course: </mat-label><br>
                <select  #crsId [(ngModel)]="Lesson.crsId" [value]="Lesson.crsId" id="crsId" name="crsId">
                        <option *ngFor="let Course of allCourse" value="{{Course.id}}">{{Course.name}}</option>
                </select>
            </div><br>
    

    <br>
<div *ngIf="Lesson.id!=CheckId then update else addN ">
</div>


<ng-template #update>
<button mat-button type="submit" class="btnSubmit" (click)="onUpdateLessonSubmit()" style="padding: 5px;">{{addORupdate}}</button>
</ng-template>
<ng-template #addN>

    <button mat-button type="submit" class="btnSubmit" (click)="addNewL(Lesson)" style="padding: 5px;">{{addORupdate}}</button>
    
</ng-template>
<div class="alert alert-warning" *ngIf="AddLessonFailed">
    Add Lesson failed!<br />{{ error }}
</div>
</form>
    </div>
    </div>
    </ng-template>



    <ng-template #table>
        <div  *ngFor="let lecture of allLecture">
              <div class="row" style="background-color:rgb(159, 215, 241);width: 100%; height: 70px;font-weight: bolder;">
                            <div class="col-md-12 centerText">
                                <h1 style="font-size: xx-large;text-align: center;">{{lecture.tilte}}</h1>
                            </div>
                 </div>
         
            <div *ngFor="let lesson of allLesson , let i=index" class="card">
                <div class="row" >
                    <div *ngIf="lecture.id==lesson.lectureId">
                        
                        <div class="col-md-1">&nbsp;</div>
                        <div class="col-md-4">
                            <mat-card class="dataOfObjective" style="border-top-color: #0094f7">
                               
                                <mat-label class="titleData" style="text-align: center;">{{lecture.tilte}}</mat-label>
                             
                                <br>
                                <table style="width: 60%;text-align: center;">
                                    <tr>
                                        <th> Title:</th>
                                        <td>
                                         {{lesson.title}}</td>

                                    </tr> <tr>
                                        <th>Details:</th>
                                        <td>
                                            {{lesson.details}}</td>

                                    </tr>
                                    <tr>
                                        <th>Type:</th>
                                        <td>
                                            {{lesson.type}}</td>
                                    </tr>
                                    <tr>
                                        <th>ContentNumber:</th>
                                        <td>
                                            {{lesson.contentNumber}}</td>
                                    </tr>
                                    <tr>
                                        <th>Duration:</th>
                                        <td>
                                     
                                        {{lesson.duration}}
                                        </td>
                                    </tr>
                                </table>
                              
                                <br>
                                <mat-label class="titleData" style="text-align: center;">
                                  Course Name:
                                </mat-label>
                                <mat-label
                                    style="text-align: center;line-height: 22px;font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">
                                    <div *ngFor="let c of allCourse">
                                        <div *ngIf="c.id==lesson.crsId">
                                            <td>{{c.name}}</td> 
                                        </div>
                                    </div>
                                                                </mat-label>
                                <br>
                                <br />
                                <button class="btn btn-outline-danger" style="margin: 10px;width: 250px;"
                                (click)="openDeleteLessonModal(lesson.id)">Delete</button>
                                <button class="btn btn-outline-primary" style="margin: 10px;width: 250px;"
                                (click)="openUpdateLessonModal(lesson)">Update</button>
                            </mat-card>
                        </div>
                        <div class="col-md-1">&nbsp;</div>
                    </div>
                    </div>
          
            </div>
        </div>
</ng-template>
</div>